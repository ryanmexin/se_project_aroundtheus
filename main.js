!function(){"use strict";class t{constructor(t,e){let{data:s,handleImageClick:i}=t;this._data=s,this._name=s.name,this._link=s.link,this._cardSelector=e,this._handleImageClick=i}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._handleDeleteButton()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick(this._data)}))}_handleLikeIcon(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__image").alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardElement}}class e{constructor(t){let{popupSelector:e}=t;this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}_handleClickClose=t=>{t.target.classList.contains("modal_opened")&&this.close(t.target)};open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleClickClose)}close(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleClickClose),this._popupElement.classList.remove("modal_opened")}_handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>this.close()))}}class s extends e{constructor(t){let{popupSelector:e,handleFormSubmit:s}=t;super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupElement.querySelectorAll(".modal__form-input"),this._handleFormSubmit=s,this._handleSubmit=this._handleSubmit.bind(this)}_getInputValues(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}_handleSubmit(){this._handleFormSubmit(this._getInputValues())}open(){this._popupForm.addEventListener("submit",this._handleSubmit),super.open()}close(){this._popupForm.removeEventListener("submit",this._handleSubmit),this._popupForm.reset(),super.close()}}const i=document.querySelector("#profile-title-input"),o=document.querySelector("#profile-description-input");var n=class{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e}_checkInputValidity(t){if(!t.validity.valid)return this._showInputError(t);this._hideInputError(t)}_showInputError(t){const e=this._form.querySelector("#"+t.id+"-error");t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._form.querySelector("#"+t.id+"-error");t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return!this._inputEls.every((t=>t.validity.valid))}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((t=>{t.addEventListener("input",(e=>{this._checkInputValidity(t),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}resetValidation(){this.disableButton()}};const r=new class extends e{constructor(t){let{popupSelector:e}=t;super({popupSelector:e})}open(t){this._modalPicture=this._popupElement.querySelector("#image__modal"),this._modalPictureDescription=this._popupElement.querySelector(".modal__image-name"),this._modalPicture.src=t.link,this._modalPicture.alt=`Photo of ${t.name}`,this._modalPictureDescription.textContent=t.name,super.open()}}({popupSelector:"#preview-image-modal"});r.setEventListeners();const l=e=>{const s=new t({data:e,handleImageClick:t=>{r.open(t)}},"#card-template").getView();a.addItem(s)},a=new class{constructor(t,e){let{items:s,renderer:i}=t;this._renderer=i,this._renderedItems=s,this._items=s,this._container=document.querySelector(e)}renderItems(){this._renderedItems.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:[{name:"Tokyo",link:"https://images.unsplash.com/photo-1678951310861-60299f9b0162?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Golden Gate Bridge",link:"https://images.unsplash.com/photo-1603389865219-669a0768193e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Pleasure Pier TX",link:"https://images.unsplash.com/photo-1598805291186-612c3ca482a6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8cGxlYXN1cmUlMjBwaWVyfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=400&q=60"},{name:"Oceanside CA",link:"https://images.unsplash.com/photo-1528521712081-0480efff6665?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80"},{name:"Yellowstone National Park",link:"https://images.unsplash.com/photo-1586968332704-0160550f3ec1?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTV8fHllbGxvd3N0b25lJTIwbmF0aW9uYWwlMjBwYXJrfGVufDB8fDB8fA%3D%3D&auto=format&fit=crop&w=400&q=60"},{name:"Venice",link:"https://images.unsplash.com/photo-1516483638261-f4dbaf036963?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8aXRhbHl8ZW58MHx8MHx8&auto=format&fit=crop&w=400&q=60"}],renderer:l},".cards__list");a.renderItems();const c=new class{constructor(t,e){this.title=document.querySelector(t),this.subtitle=document.querySelector(e)}getUserInfo(){return{title:this.title.textContent,subtitle:this.subtitle.textContent}}setUserInfo(t){let{title:e,subtitle:s}=t;this.title.textContent=e,this.subtitle.textContent=s}}(".profile__title",".profile__subtitle"),u=new s({popupSelector:"#add-card-modal",handleFormSubmit:t=>{l(t),u.close()}});u.setEventListeners();const d=new s({popupSelector:"#profile-edit-modal",handleFormSubmit:t=>{c.setUserInfo(t),d.close()}});d.setEventListeners(),document.querySelector("#profile-edit-button").addEventListener("click",(()=>{const t=c.getUserInfo();i.value=t.title,o.value=t.subtitle,_.resetValidation(),d.open()})),document.querySelector(".profile__buttons-add").addEventListener("click",(()=>{m.resetValidation(),u.open()}));const h={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},_=new n(h,document.querySelector("#profile-form"));_.enableValidation();const m=new n(h,document.querySelector("#add-card-form"));m.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQWUsTUFBTUEsRUFDbkJDLFlBQVdDLEVBQTZCQyxHQUFjLElBQTFDLEtBQUVDLEVBQUksaUJBQUVDLEdBQWtCSCxFQUNwQ0ksS0FBS0MsTUFBUUgsRUFDYkUsS0FBS0UsTUFBUUosRUFBS0ssS0FDbEJILEtBQUtJLE1BQVFOLEVBQUtPLEtBQ2xCTCxLQUFLTSxjQUFnQlQsRUFDckJHLEtBQUtPLGtCQUFvQlIsQ0FDM0IsQ0FFQVMscUJBQ0VSLEtBQUtTLGFBQ0ZDLGNBQWMsc0JBQ2RDLGlCQUFpQixTQUFTLEtBQ3pCWCxLQUFLWSxpQkFBaUIsSUFFMUJaLEtBQUtTLGFBQ0ZDLGNBQWMsd0JBQ2RDLGlCQUFpQixTQUFTLEtBQ3pCWCxLQUFLYSxxQkFBcUIsSUFFOUJiLEtBQUtTLGFBQ0ZDLGNBQWMsZ0JBQ2RDLGlCQUFpQixTQUFTLEtBQ3pCWCxLQUFLTyxrQkFBa0JQLEtBQUtDLE1BQU0sR0FFeEMsQ0FFQVcsa0JBQ0VaLEtBQUtTLGFBQ0ZDLGNBQWMsc0JBQ2RJLFVBQVVDLE9BQU8sMkJBQ3RCLENBQ0FGLHNCQUNFYixLQUFLUyxhQUFhTyxTQUNsQmhCLEtBQUtTLGFBQWUsSUFDdEIsQ0FFQVEsZUFDRSxPQUFPQyxTQUNKUixjQUFjVixLQUFLTSxlQUNuQmEsUUFBUVQsY0FBYyxTQUN0QlUsV0FBVSxFQUNmLENBRUFDLFVBT0UsT0FOQXJCLEtBQUtTLGFBQWVULEtBQUtpQixlQUN6QmpCLEtBQUtRLHFCQUNMUixLQUFLUyxhQUFhQyxjQUFjLGdCQUFnQlksSUFBTXRCLEtBQUtJLE1BQzNESixLQUFLUyxhQUFhQyxjQUFjLGdCQUFnQmEsSUFBTXZCLEtBQUtFLE1BQzNERixLQUFLUyxhQUFhQyxjQUFjLGdCQUFnQmMsWUFBY3hCLEtBQUtFLE1BRTVERixLQUFLUyxZQUNkLEVDcERhLE1BQU1nQixFQUNuQjlCLFlBQVdDLEdBQW9CLElBQW5CLGNBQUU4QixHQUFlOUIsRUFDM0JJLEtBQUsyQixjQUFnQlQsU0FBU1IsY0FBY2dCLEdBQzVDMUIsS0FBSzRCLGdCQUFrQjVCLEtBQUs0QixnQkFBZ0JDLEtBQUs3QixLQUNuRCxDQUNBOEIsa0JBQXFCQyxJQUNmQSxFQUFJQyxPQUFPbEIsVUFBVW1CLFNBQVMsaUJBQ2hDakMsS0FBS2tDLE1BQU1ILEVBQUlDLE9BQ2pCLEVBR0ZHLE9BQ0VuQyxLQUFLMkIsY0FBY2IsVUFBVXNCLElBQUksZ0JBQ2pDbEIsU0FBU1AsaUJBQWlCLFVBQVdYLEtBQUs0QixpQkFDMUM1QixLQUFLMkIsY0FBY2hCLGlCQUFpQixZQUFhWCxLQUFLOEIsa0JBQ3hELENBQ0FJLFFBQ0VoQixTQUFTbUIsb0JBQW9CLFVBQVdyQyxLQUFLNEIsaUJBQzdDNUIsS0FBSzJCLGNBQWNVLG9CQUFvQixZQUFhckMsS0FBSzhCLG1CQUN6RDlCLEtBQUsyQixjQUFjYixVQUFVRSxPQUFPLGVBQ3RDLENBRUFZLGdCQUFtQkcsSUFDRCxXQUFaQSxFQUFJTyxLQUNOdEMsS0FBS2tDLE9BQ1AsRUFFRkssb0JBQ0V2QyxLQUFLMkIsY0FDRmpCLGNBQWMsaUJBQ2RDLGlCQUFpQixTQUFTLElBQU1YLEtBQUtrQyxTQUMxQyxFQzdCYSxNQUFNTSxVQUFzQmYsRUFDekM5QixZQUFXQyxHQUFzQyxJQUFyQyxjQUFFOEIsRUFBYSxpQkFBRWUsR0FBa0I3QyxFQUM3QzhDLE1BQU0sQ0FBRWhCLGtCQUNSMUIsS0FBSzJDLFdBQWEzQyxLQUFLMkIsY0FBY2pCLGNBQWMsZ0JBQ25EVixLQUFLNEMsV0FBYTVDLEtBQUsyQixjQUFja0IsaUJBQWlCLHNCQUN0RDdDLEtBQUs4QyxrQkFBb0JMLEVBRXpCekMsS0FBSytDLGNBQWdCL0MsS0FBSytDLGNBQWNsQixLQUFLN0IsS0FDL0MsQ0FDQWdELGtCQUNFLE1BQU1DLEVBQWEsQ0FBQyxFQUlwQixPQUhBakQsS0FBSzRDLFdBQVdNLFNBQVNDLElBQ3ZCRixFQUFXRSxFQUFNaEQsTUFBUWdELEVBQU1DLEtBQUssSUFFL0JILENBQ1QsQ0FFQUYsZ0JBQ0UvQyxLQUFLOEMsa0JBQWtCOUMsS0FBS2dELGtCQUM5QixDQUVBYixPQUNFbkMsS0FBSzJDLFdBQVdoQyxpQkFBaUIsU0FBVVgsS0FBSytDLGVBQ2hETCxNQUFNUCxNQUNSLENBQ0FELFFBQ0VsQyxLQUFLMkMsV0FBV04sb0JBQW9CLFNBQVVyQyxLQUFLK0MsZUFDbkQvQyxLQUFLMkMsV0FBV1UsUUFDaEJYLE1BQU1SLE9BQ1IsRUMvQkssTUEyQk1vQixFQUFvQnBDLFNBQVNSLGNBQWMsd0JBQzNDNkMsRUFBMEJyQyxTQUFTUixjQUM5Qyw4QkM4Q0YsTUEzRUEsTUFDRWYsWUFBWTZELEVBQVVDLEdBQ3BCekQsS0FBSzBELGVBQWlCRixFQUFTRyxjQUMvQjNELEtBQUs0RCxzQkFBd0JKLEVBQVNLLHFCQUN0QzdELEtBQUs4RCxxQkFBdUJOLEVBQVNPLG9CQUNyQy9ELEtBQUtnRSxpQkFBbUJSLEVBQVNTLGdCQUNqQ2pFLEtBQUtrRSxZQUFjVixFQUFTVyxXQUM1Qm5FLEtBQUtvRSxNQUFRWCxDQUNmLENBRUFZLG9CQUFvQkMsR0FDbEIsSUFBS0EsRUFBUUMsU0FBU0MsTUFDcEIsT0FBT3hFLEtBQUt5RSxnQkFBZ0JILEdBRTlCdEUsS0FBSzBFLGdCQUFnQkosRUFDdkIsQ0FFQUcsZ0JBQWdCSCxHQUNkLE1BQU1LLEVBQXNCM0UsS0FBS29FLE1BQU0xRCxjQUNyQyxJQUFNNEQsRUFBUU0sR0FBSyxVQUVyQk4sRUFBUXhELFVBQVVzQixJQUFJcEMsS0FBS2dFLGtCQUMzQlcsRUFBb0JuRCxZQUFjOEMsRUFBUU8sa0JBQzFDRixFQUFvQjdELFVBQVVzQixJQUFJcEMsS0FBS2tFLFlBQ3pDLENBRUFRLGdCQUFnQkosR0FDZCxNQUFNSyxFQUFzQjNFLEtBQUtvRSxNQUFNMUQsY0FDckMsSUFBTTRELEVBQVFNLEdBQUssVUFFckJOLEVBQVF4RCxVQUFVRSxPQUFPaEIsS0FBS2dFLGtCQUM5QlcsRUFBb0JuRCxZQUFjLEdBQ2xDbUQsRUFBb0I3RCxVQUFVRSxPQUFPaEIsS0FBS2tFLFlBQzVDLENBRUFZLG9CQUNFLEdBQUk5RSxLQUFLK0UsbUJBR1AsT0FGQS9FLEtBQUtnRixjQUFjbEUsVUFBVXNCLElBQUlwQyxLQUFLOEQsMkJBQ3RDOUQsS0FBS2dGLGNBQWNDLFVBQVcsR0FHaENqRixLQUFLZ0YsY0FBY2xFLFVBQVVFLE9BQU9oQixLQUFLOEQsc0JBQ3pDOUQsS0FBS2dGLGNBQWNDLFVBQVcsQ0FDaEMsQ0FFQUYsbUJBQ0UsT0FBUS9FLEtBQUtrRixVQUFVQyxPQUFPYixHQUFZQSxFQUFRQyxTQUFTQyxPQUM3RCxDQUVBaEUscUJBQ0VSLEtBQUtrRixVQUFZLElBQUlsRixLQUFLb0UsTUFBTXZCLGlCQUFpQjdDLEtBQUswRCxpQkFDdEQxRCxLQUFLZ0YsY0FBZ0JoRixLQUFLb0UsTUFBTTFELGNBQWNWLEtBQUs0RCx1QkFDbkQ1RCxLQUFLa0YsVUFBVWhDLFNBQVNvQixJQUN0QkEsRUFBUTNELGlCQUFpQixTQUFVb0IsSUFDakMvQixLQUFLcUUsb0JBQW9CQyxHQUN6QnRFLEtBQUs4RSxtQkFBbUIsR0FDeEIsR0FFTixDQUVBTSxtQkFDRXBGLEtBQUtvRSxNQUFNekQsaUJBQWlCLFVBQVdvQixJQUNyQ0EsRUFBSXNELGdCQUFnQixJQUV0QnJGLEtBQUtRLG9CQUNQLENBQ0E4RSxnQkFDRXRGLEtBQUtnRixjQUFjbEUsVUFBVXNCLElBQUlwQyxLQUFLOEQsc0JBQ3RDOUQsS0FBS2dGLGNBQWNDLFVBQVcsQ0FDaEMsQ0FDQU0sa0JBQ0V2RixLQUFLc0YsZUFDUCxHQ3pERixNQUFNRSxFQUFjLElDWkwsY0FBNkIvRCxFQUMxQzlCLFlBQVdDLEdBQW9CLElBQW5CLGNBQUU4QixHQUFlOUIsRUFDM0I4QyxNQUFNLENBQUVoQixpQkFDVixDQUNBUyxLQUFLckMsR0FDSEUsS0FBS3lGLGNBQWdCekYsS0FBSzJCLGNBQWNqQixjQUFjLGlCQUN0RFYsS0FBSzBGLHlCQUNIMUYsS0FBSzJCLGNBQWNqQixjQUFjLHNCQUNuQ1YsS0FBS3lGLGNBQWNuRSxJQUFNeEIsRUFBS08sS0FDOUJMLEtBQUt5RixjQUFjbEUsSUFBTyxZQUFXekIsRUFBS0ssT0FDMUNILEtBQUswRix5QkFBeUJsRSxZQUFjMUIsRUFBS0ssS0FDakR1QyxNQUFNUCxNQUNSLEdEQXFDLENBQ3JDVCxjQUFlLHlCQUVqQjhELEVBQVlqRCxvQkFJWixNQUFNb0QsRUFBYzdGLElBQ2xCLE1BU004RixFQVRjLElBQUlsRyxFQUN0QixDQUNFSSxPQUNBQyxpQkFBbUI4RixJQUNqQkwsRUFBWXJELEtBQUswRCxFQUFVLEdGT25CLGtCRUZjeEUsVUFDNUJ5RSxFQUFZQyxRQUFRSCxFQUFRLEVBR3hCRSxFQUFjLElFcENMLE1BQ2JuRyxZQUFXQyxFQUFzQm9HLEdBQW1CLElBQXhDLE1BQUVDLEVBQUssU0FBRUMsR0FBVXRHLEVBQzdCSSxLQUFLbUcsVUFBWUQsRUFDakJsRyxLQUFLb0csZUFBaUJILEVBQ3RCakcsS0FBS3FHLE9BQVNKLEVBQ2RqRyxLQUFLc0csV0FBYXBGLFNBQVNSLGNBQWNzRixFQUMzQyxDQUNBTyxjQUNFdkcsS0FBS29HLGVBQWVsRCxTQUFTc0QsSUFDM0J4RyxLQUFLbUcsVUFBVUssRUFBSyxHQUV4QixDQUVBVCxRQUFRVSxHQUNOekcsS0FBS3NHLFdBQVdJLFFBQVFELEVBQzFCLEdGc0JBLENBQ0VSLE1GdEN3QixDQUMxQixDQUNFOUYsS0FBTSxRQUNORSxLQUFNLGlLQUVSLENBQ0VGLEtBQU0scUJBQ05FLEtBQU0saUtBRVIsQ0FDRUYsS0FBTSxtQkFDTkUsS0FBTSx5TEFFUixDQUNFRixLQUFNLGVBQ05FLEtBQU0saUtBRVIsQ0FDRUYsS0FBTSw0QkFDTkUsS0FBTSw2TUFFUixDQUNFRixLQUFNLFNBQ05FLEtBQU0sc0tFZ0JONkYsU0FBVVAsR0ZOQyxnQkVVZkcsRUFBWVMsY0FHWixNQUFNSSxFQUFPLElHOUNFLE1BQ2JoSCxZQUFZaUgsRUFBT0MsR0FDakI3RyxLQUFLNEcsTUFBUTFGLFNBQVNSLGNBQWNrRyxHQUNwQzVHLEtBQUs2RyxTQUFXM0YsU0FBU1IsY0FBY21HLEVBQ3pDLENBQ0FDLGNBQ0UsTUFBTyxDQUNMRixNQUFPNUcsS0FBSzRHLE1BQU1wRixZQUNsQnFGLFNBQVU3RyxLQUFLNkcsU0FBU3JGLFlBRTVCLENBQ0F1RixZQUFXbkgsR0FBc0IsSUFBckIsTUFBRWdILEVBQUssU0FBRUMsR0FBVWpILEVBQzdCSSxLQUFLNEcsTUFBTXBGLFlBQWNvRixFQUN6QjVHLEtBQUs2RyxTQUFTckYsWUFBY3FGLENBQzlCLEdIZ0N3QixrQkFBbUIsc0JBR3ZDRyxFQUFlLElBQUl4RSxFQUFjLENBQ3JDZCxjQUFlLGtCQUNmZSxpQkFBbUJ3RSxJQUNqQnRCLEVBQVdzQixHQUNYRCxFQUFhOUUsT0FBTyxJQUd4QjhFLEVBQWF6RSxvQkFFYixNQUFNMkUsRUFBbUIsSUFBSTFFLEVBQWMsQ0FDekNkLGNBQWUsc0JBQ2ZlLGlCQUFtQndFLElBQ2pCTixFQUFLSSxZQUFZRSxHQUNqQkMsRUFBaUJoRixPQUFPLElBRzVCZ0YsRUFBaUIzRSxvQkFHV3JCLFNBQVNSLGNBQWMsd0JBQy9CQyxpQkFBaUIsU0FBUyxLQUM1QyxNQUFNd0csRUFBV1IsRUFBS0csY0FDdEJ4RCxFQUFrQkYsTUFBUStELEVBQVNQLE1BQ25DckQsRUFBd0JILE1BQVErRCxFQUFTTixTQUN6Q08sRUFBa0I3QixrQkFDbEIyQixFQUFpQi9FLE1BQU0sSUFFRWpCLFNBQVNSLGNBQWMseUJBQy9CQyxpQkFBaUIsU0FBUyxLQUMzQzBHLEVBQWlCOUIsa0JBQ2pCeUIsRUFBYTdFLE1BQU0sSUFJckIsTUFBTW1GLEVBQVMsQ0FDYkMsYUFBYyxlQUNkNUQsY0FBZSxxQkFDZkUscUJBQXNCLGlCQUN0QkUsb0JBQXFCLHlCQUNyQkUsZ0JBQWlCLDBCQUNqQkUsV0FBWSx3QkFJUmlELEVBQW9CLElBQUlJLEVBQWNGLEVBRDNCcEcsU0FBU1IsY0FBYyxrQkFFeEMwRyxFQUFrQmhDLG1CQUNsQixNQUNNaUMsRUFBbUIsSUFBSUcsRUFBY0YsRUFEaEJwRyxTQUFTUixjQUFjLG1CQUVsRDJHLEVBQWlCakMsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlSW1hZ2VDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKTtcclxuICAgICAgfSk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHRoaXMuX2RhdGEpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXHJcbiAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH1cclxuICBfaGFuZGxlRGVsZXRlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG4gIF9oYW5kbGVDbGlja0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoZXZ0LnRhcmdldCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybS1pbnB1dFwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IHRoaXMuX2hhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBmb3JtdmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZm9ybXZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZm9ybXZhbHVlcztcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXQoKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdCk7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIlRva3lvXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjc4OTUxMzEwODYxLTYwMjk5ZjliMDE2Mj9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Njg3JnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNjAzMzg5ODY1MjE5LTY2OWEwNzY4MTkzZT9peGxpYj1yYi00LjAuMyZpeGlkPU1ud3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4JmF1dG89Zm9ybWF0JmZpdD1jcm9wJnc9Njg3JnE9ODBcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiUGxlYXN1cmUgUGllciBUWFwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU5ODgwNTI5MTE4Ni02MTJjM2NhNDgyYTY/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh6WldGeVkyaDhPSHg4Y0d4bFlYTjFjbVVsTWpCd2FXVnlmR1Z1ZkRCOGZEQjhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTQwMCZxPTYwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIk9jZWFuc2lkZSBDQVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUyODUyMTcxMjA4MS0wNDgwZWZmZjY2NjU/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTY4NyZxPTgwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlllbGxvd3N0b25lIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1ODY5NjgzMzI3MDQtMDE2MDU1MGYzZWMxP2l4bGliPXJiLTQuMC4zJml4aWQ9TW53eE1qQTNmREI4TUh4elpXRnlZMmg4TVRWOGZIbGxiR3h2ZDNOMGIyNWxKVEl3Ym1GMGFXOXVZV3dsTWpCd1lYSnJmR1Z1ZkRCOGZEQjhmQSUzRCUzRCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZ3PTQwMCZxPTYwXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZlbmljZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUxNjQ4MzYzODI2MS1mNGRiYWYwMzY5NjM/aXhsaWI9cmItNC4wLjMmaXhpZD1Nbnd4TWpBM2ZEQjhNSHh6WldGeVkyaDhNbng4YVhSaGJIbDhaVzU4TUh4OE1IeDgmYXV0bz1mb3JtYXQmZml0PWNyb3Amdz00MDAmcT02MFwiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGNhcmRTZWN0aW9uOiBcIi5jYXJkc19fbGlzdFwiLFxyXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gIHByZXZpZXdQb3B1cDogXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWw7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNcIiArIGlucHV0RWwuaWQgKyBcIi1lcnJvclwiXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNcIiArIGlucHV0RWwuaWQgKyBcIi1lcnJvclwiXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHtcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgc2VsZWN0b3JzLFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuXHJcbi8vIFBvcHVwIHdpdGggSW1hZ2VcclxuY29uc3QgY2FyZFByZXZpZXcgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIixcclxufSk7XHJcbmNhcmRQcmV2aWV3LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBTZWN0aW9uIC8gQ2FyZFxyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgZGF0YSxcclxuICAgICAgaGFuZGxlSW1hZ2VDbGljazogKGltYWdlRGF0YSkgPT4ge1xyXG4gICAgICAgIGNhcmRQcmV2aWV3Lm9wZW4oaW1hZ2VEYXRhKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlXHJcbiAgKTtcclxuICBjb25zdCBuZXdDYXJkID0gY2FyZEVsZW1lbnQuZ2V0VmlldygpO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XHJcbn07XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIHNlbGVjdG9ycy5jYXJkU2VjdGlvblxyXG4pO1xyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy8gVXNlciBJbmZvXHJcbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oXCIucHJvZmlsZV9fdGl0bGVcIiwgXCIucHJvZmlsZV9fc3VidGl0bGVcIik7XHJcblxyXG4vLyBQb3B1cCB3aXRoIGZvcm1cclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2FkZC1jYXJkLW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICByZW5kZXJDYXJkKGlucHV0VmFsdWVzKTtcclxuICAgIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xyXG4gIH0sXHJcbn0pO1xyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICB1c2VyLnNldFVzZXJJbmZvKGlucHV0VmFsdWVzKTtcclxuICAgIGVkaXRQcm9maWxlTW9kYWwuY2xvc2UoKTtcclxuICB9LFxyXG59KTtcclxuZWRpdFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gcG9wIGJ1dHRvblxyXG5jb25zdCBvcGVuRWRpdFBvcHVwQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5vcGVuRWRpdFBvcHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VyLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VyRGF0YS50aXRsZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJEYXRhLnN1YnRpdGxlO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGVkaXRQcm9maWxlTW9kYWwub3BlbigpO1xyXG59KTtcclxuY29uc3Qgb3BlbkFkZFBvcHVwQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b25zLWFkZFwiKTtcclxub3BlbkFkZFBvcHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuLy8gRm9ybSBWYWxpZGF0b3JcclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmNvbnN0IGVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWZvcm1cIik7XHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBlZGl0Rm9ybSk7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY29uc3QgYWRkQ2FyZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1mb3JtXCIpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhZGRDYXJkRm9ybUVsZW1lbnQpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gIH1cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHRoaXMuX21vZGFsUGljdHVyZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlX19tb2RhbFwiKTtcclxuICAgIHRoaXMuX21vZGFsUGljdHVyZURlc2NyaXB0aW9uID1cclxuICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLW5hbWVcIik7XHJcbiAgICB0aGlzLl9tb2RhbFBpY3R1cmUuc3JjID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbW9kYWxQaWN0dXJlLmFsdCA9IGBQaG90byBvZiAke2RhdGEubmFtZX1gO1xyXG4gICAgdGhpcy5fbW9kYWxQaWN0dXJlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbUVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodGl0bGUsIHN1YnRpdGxlKSB7XHJcbiAgICB0aGlzLnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZSk7XHJcbiAgICB0aGlzLnN1YnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzdWJ0aXRsZSk7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdGl0bGU6IHRoaXMudGl0bGUudGV4dENvbnRlbnQsXHJcbiAgICAgIHN1YnRpdGxlOiB0aGlzLnN1YnRpdGxlLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0VXNlckluZm8oeyB0aXRsZSwgc3VidGl0bGUgfSkge1xyXG4gICAgdGhpcy50aXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgdGhpcy5zdWJ0aXRsZS50ZXh0Q29udGVudCA9IHN1YnRpdGxlO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9kYXRhIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfaGFuZGxlQ2xpY2tDbG9zZSIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiY2xvc2UiLCJvcGVuIiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImZvcm12YWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInNldHRpbmdzIiwiZm9ybUVsIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiaW5wdXRFbCIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJfaGlkZUlucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2VFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9pbnB1dEVscyIsImV2ZXJ5IiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZGlzYWJsZUJ1dHRvbiIsInJlc2V0VmFsaWRhdGlvbiIsImNhcmRQcmV2aWV3IiwiX21vZGFsUGljdHVyZSIsIl9tb2RhbFBpY3R1cmVEZXNjcmlwdGlvbiIsInJlbmRlckNhcmQiLCJuZXdDYXJkIiwiaW1hZ2VEYXRhIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfaXRlbXMiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiaXRlbUVsZW1lbnQiLCJwcmVwZW5kIiwidXNlciIsInRpdGxlIiwic3VidGl0bGUiLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwibmV3Q2FyZFBvcHVwIiwiaW5wdXRWYWx1ZXMiLCJlZGl0UHJvZmlsZU1vZGFsIiwidXNlckRhdGEiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==